<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Orb Saber Workshop</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div id="startOverlay" class="startOverlay" aria-label="Start audio">
    <button id="startBtn" class="startBtn" type="button">Start Audio</button>
  </div>

  <div class="wrap">
    <header class="topbar">
      <div class="zoneTitle">DRONE ZONE</div>
      <div class="topActions">
        <button id="replayBtn" class="regen" type="button">RE-PLAY</button>
        <button id="playBtn" class="regen ghost" type="button">Mute</button>
      </div>
    </header>

    <section class="panel" aria-label="Randomize controls">
      <div class="randomizeRow">
        <div class="randomizeLeft">
          <div class="panelTitle">RAMDOMIZE CONTROLS</div>
          <div class="randomizeModes" id="randomizeModes">
            <label><input type="checkbox" data-randomize-mode="texture" checked /> Texture</label>
            <label><input type="checkbox" data-randomize-mode="bass" checked /> Bass</label>
            <label><input type="checkbox" data-randomize-mode="noise" checked /> Noise</label>
          </div>
        </div>
        <div class="randomizeRight">
          <button id="regenBtn" class="regen randomizeAction" type="button">Randomize</button>
        </div>
      </div>
    </section>

    <section class="voiceStrip" aria-label="Lightsaber voice stack">
      <div class="voiceGrid" id="voiceGrid"></div>
    </section>

    <section class="panel" aria-label="Voice editor">
      <div class="panelHeader">
        <div class="panelTitle">Voice Controls</div>
        <div class="panelSub" id="activeLabel">Editing: Voice 1</div>
      </div>

      <div class="controls" id="controls">
        <label class="row" data-mode="all">
          <span>Mode</span>
          <select data-param="mode">
            <option value="texture">Texture</option>
            <option value="bass">Bass</option>
            <option value="noise">Noise</option>
          </select>
        </label>

        <label class="row" data-mode="noise">
          <span>Noise Type</span>
          <select data-param="noiseType">
            <option value="white">White</option>
            <option value="pink">Pink</option>
            <option value="bit">Bit</option>
            <option value="metallic">Metallic</option>
          </select>
          <output data-out="noiseType"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Behavior</span>
          <div class="rowInline behaviorInline">
            <select data-param="noiseBehavior">
              <option value="sustain">Sustain</option>
              <option value="oneshot">One-shot</option>
            </select>
            <button id="noisePlayBtn" class="miniActionBtn" type="button">Play</button>
          </div>
          <output data-out="noiseBehavior"></output>
        </label>

        <label class="row noiseEnvelopeRow" data-mode="noise" data-noise-oneshot="1">
          <span>Envelope</span>
          <div class="envEditor">
            <svg class="envViz" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
              <polyline id="noiseEnvLine" points="0,98 15,12 55,12 100,98"></polyline>
            </svg>
            <div class="envStack">
              <label><span>A End</span><input type="range" min="0" max="5000" step="10" data-param="noiseAms" /></label>
              <label><span>S End</span><input type="range" min="0" max="5000" step="10" data-param="noiseSms" /></label>
              <label><span>D End</span><input type="range" min="0" max="5000" step="10" data-param="noiseDms" /></label>
            </div>
          </div>
          <output data-out="noiseEnvelope">5000 ms</output>
        </label>

        <label class="row" data-mode="noise">
          <span>Noise Env Peak</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noisePeak" />
          <output data-out="noisePeak"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>LP Sweep Start</span>
          <input type="range" min="200" max="12000" step="1" data-param="noiseLPStart" />
          <output data-out="noiseLPStart"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>LP Sweep End</span>
          <input type="range" min="40" max="4000" step="1" data-param="noiseLPEnd" />
          <output data-out="noiseLPEnd"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Sweep Time</span>
          <input type="range" min="0.05" max="4" step="0.01" data-param="noiseSweepTime" />
          <output data-out="noiseSweepTime"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>High Pass Filter</span>
          <input type="range" min="20" max="4000" step="1" data-param="noiseHPF" />
          <output data-out="noiseHPF"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Resonance</span>
          <input type="range" min="0.2" max="12" step="0.1" data-param="noiseRes" />
          <output data-out="noiseRes"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Boom Freq</span>
          <input type="range" min="10" max="200" step="1" data-param="noiseBoomHz" />
          <output data-out="noiseBoomHz"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Boom Amt</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noiseBoomAmt" />
          <output data-out="noiseBoomAmt"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Boom Drop</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noiseBoomDrop" />
          <output data-out="noiseBoomDrop"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Ring Freq</span>
          <input type="range" min="30" max="1600" step="1" data-param="noiseRingHz" />
          <output data-out="noiseRingHz"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Ring Amt</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noiseRingAmt" />
          <output data-out="noiseRingAmt"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Ring Drop</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noiseRingDrop" />
          <output data-out="noiseRingDrop"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Crackle Amt</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noiseCrackleAmt" />
          <output data-out="noiseCrackleAmt"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Crackle HPF</span>
          <input type="range" min="500" max="8000" step="1" data-param="noiseCrackleHPF" />
          <output data-out="noiseCrackleHPF"></output>
        </label>

        <label class="row" data-mode="noise">
          <span>Edge Drive</span>
          <input type="range" min="0" max="1" step="0.01" data-param="noiseEdgeDrive" />
          <output data-out="noiseEdgeDrive"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Oscillator</span>
          <div class="rowInline">
            <select data-param="oscType">
              <option value="sawtooth">Saw</option>
              <option value="square">Square</option>
              <option value="triangle">Triangle</option>
              <option value="sine">Sine</option>
            </select>
            <label class="inlineToggle">
              <input type="checkbox" data-param="singleOsc" />
              <span>Single</span>
            </label>
          </div>
          <output data-out="singleOsc"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Osc Rate</span>
          <input type="range" min="0.5" max="2.5" step="0.01" data-param="oscRate" />
          <output data-out="oscRate"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Base Pitch</span>
          <input type="range" min="60" max="240" step="1" data-param="baseHz" />
          <output data-out="baseHz"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Unison Spread</span>
          <input type="range" min="0" max="0.02" step="0.0001" data-param="unisonSpread" />
          <output data-out="unisonSpread"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Detune</span>
          <input type="range" min="0" max="60" step="1" data-param="detune" />
          <output data-out="detune"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>PWM</span>
          <div class="rowInline">
            <label class="inlineToggle">
              <input type="checkbox" data-param="pwmOn" />
              <span>PWM</span>
            </label>
            <input type="range" min="0.05" max="0.95" step="0.01" data-param="pwm" />
          </div>
          <output data-out="pwm"></output>
        </label>

        <label class="row" data-mode="bass">
          <span>Pitch</span>
          <input type="range" min="30" max="160" step="1" data-param="bassHz" />
          <output data-out="bassHz"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO amount</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoPitch" />
          <output data-out="bassLfoPitch"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO speed</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoPitchRate" />
          <output data-out="bassLfoPitchRate"></output>
        </label>

        <label class="row" data-mode="bass">
          <span>Low Pass Filter</span>
          <input type="range" min="60" max="800" step="1" data-param="bassLP" />
          <output data-out="bassLP"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO amount</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoLPF" />
          <output data-out="bassLfoLPF"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO speed</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoLPFRate" />
          <output data-out="bassLfoLPFRate"></output>
        </label>

        <label class="row" data-mode="bass">
          <span>Resonance</span>
          <input type="range" min="0.2" max="8" step="0.1" data-param="bassRes" />
          <output data-out="bassRes"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO amount</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoRes" />
          <output data-out="bassLfoRes"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO speed</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoResRate" />
          <output data-out="bassLfoResRate"></output>
        </label>

        <label class="row" data-mode="bass">
          <span>Drive</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassDrive" />
          <output data-out="bassDrive"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO amount</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoDrive" />
          <output data-out="bassLfoDrive"></output>
        </label>

        <label class="row bassLfoRow" data-mode="bass">
          <span>LFO speed</span>
          <input type="range" min="0" max="1" step="0.01" data-param="bassLfoDriveRate" />
          <output data-out="bassLfoDriveRate"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Drive</span>
          <input type="range" min="0" max="1" step="0.01" data-param="drive" />
          <output data-out="drive"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Filter Cutoff</span>
          <input type="range" min="200" max="5000" step="1" data-param="filterCutoff" />
          <output data-out="filterCutoff"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Filter Resonance</span>
          <input type="range" min="0.2" max="12" step="0.1" data-param="filterQ" />
          <output data-out="filterQ"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Bandpass Edge</span>
          <input type="range" min="0" max="1" step="0.01" data-param="edge" />
          <output data-out="edge"></output>
        </label>

        <label class="row" data-mode="texture">
          <span>Noise Mix</span>
          <input type="range" min="0" max="0.6" step="0.01" data-param="noiseMix" value="0" />
          <output data-out="noiseMix"></output>
        </label>

        <label class="row" data-mode="all">
          <span>Stereo L/R</span>
          <input type="range" min="0" max="1" step="0.01" data-param="stereoWidth" />
          <output data-out="stereoWidth"></output>
        </label>

        <label class="row" data-mode="all">
          <span>Freq Spatialize</span>
          <input type="range" min="0" max="1" step="0.01" data-param="spatialize" />
          <output data-out="spatialize"></output>
        </label>

        <label class="row" data-mode="all">
          <span>Gain</span>
          <input type="range" min="0" max="0.8" step="0.01" data-param="gain" />
          <output data-out="gain"></output>
        </label>
      </div>
    </section>
  </div>

  <script src="./app.js" defer></script>
</body>
</html>
